services:
  bentopdf:
    image: bentopdfteam/bentopdf:1.16.1@sha256:d98223eb82661a9f6624a813ed7fc44ad4f80e761e24116a721e1cd891ac8c3f
    container_name: bentopdf
    restart: unless-stopped
    networks:
        - proxy
    labels:
      - traefik.enable=true
      - traefik.http.routers.bentopdf.rule=Host(`pdf.{{ TRAEFIK_HOST_DOMAIN }}`)
      - traefik.http.routers.bentopdf.entrypoints=https
      - traefik.http.routers.bentopdf.middlewares=default-headers@file,https-redirectscheme@file,dynamic
      - traefik.http.routers.bentopdf.tls=true
      - traefik.http.routers.bentopdf.service=bentopdf
      - traefik.http.services.bentopdf.loadbalancer.server.port=8080
      - sablier.enable=true
      - sablier.group=sablier
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8080/ >/dev/null || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
