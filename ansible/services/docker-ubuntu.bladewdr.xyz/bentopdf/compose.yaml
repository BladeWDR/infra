services:
  bentopdf:
    image: bentopdfteam/bentopdf:2.2.1@sha256:b123f74921c079fb2be8a5a04eb576ab542d4a551bc26b291173580b7d037968
    container_name: bentopdf
    restart: unless-stopped
    networks:
        - proxy
    labels:
      - traefik.enable=true
      - traefik.http.routers.bentopdf.rule=Host(`pdf.{{ TRAEFIK_HOST_DOMAIN }}`)
      - traefik.http.routers.bentopdf.entrypoints=https
      - traefik.http.routers.bentopdf.middlewares=default-headers@file,https-redirectscheme@file,dynamic
      - traefik.http.routers.bentopdf.tls=true
      - traefik.http.routers.bentopdf.service=bentopdf
      - traefik.http.services.bentopdf.loadbalancer.server.port=8080
      - sablier.enable=true
      - sablier.group=sablier
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8080/ >/dev/null || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
